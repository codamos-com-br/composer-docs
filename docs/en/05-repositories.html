<!DOCTYPE HTML>
<html lang="pt-br" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Repositories - Composer - PT-BR</title>


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><li class="part-title">Book</li><li class="chapter-item expanded "><a href="../en/00-intro.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="../en/01-basic-usage.html"><strong aria-hidden="true">2.</strong> Basic usage</a></li><li class="chapter-item expanded "><a href="../en/02-libraries.html"><strong aria-hidden="true">3.</strong> Libraries</a></li><li class="chapter-item expanded "><a href="../en/03-cli.html"><strong aria-hidden="true">4.</strong> CLI</a></li><li class="chapter-item expanded "><a href="../en/04-schema.html"><strong aria-hidden="true">5.</strong> Schema</a></li><li class="chapter-item expanded "><a href="../en/05-repositories.html" class="active"><strong aria-hidden="true">6.</strong> Repositories</a></li><li class="chapter-item expanded "><a href="../en/06-config.html"><strong aria-hidden="true">7.</strong> Config</a></li><li class="chapter-item expanded "><a href="../en/07-runtime.html"><strong aria-hidden="true">8.</strong> Runtime</a></li><li class="chapter-item expanded "><a href="../en/08-community.html"><strong aria-hidden="true">9.</strong> Community</a></li><li class="chapter-item expanded affix "><li class="part-title">Articles</li><li class="chapter-item expanded "><a href="../en/articles/aliases.html"><strong aria-hidden="true">10.</strong> Aliases</a></li><li class="chapter-item expanded "><a href="../en/articles/authentication-for-private-packages.html"><strong aria-hidden="true">11.</strong> Authentication for privately hosted packages and repositories</a></li><li class="chapter-item expanded "><a href="../en/articles/autoloader-optimization.html"><strong aria-hidden="true">12.</strong> Autoloader optimization</a></li><li class="chapter-item expanded "><a href="../en/articles/composer-platform-dependencies.html"><strong aria-hidden="true">13.</strong> Composer platform dependencies</a></li><li class="chapter-item expanded "><a href="../en/articles/custom-installers.html"><strong aria-hidden="true">14.</strong> Setting up and using custom installers</a></li><li class="chapter-item expanded "><a href="../en/articles/handling-private-packages.html"><strong aria-hidden="true">15.</strong> Handling private packages</a></li><li class="chapter-item expanded "><a href="../en/articles/plugins.html"><strong aria-hidden="true">16.</strong> Setting up and using plugins</a></li><li class="chapter-item expanded "><a href="../en/articles/repository-priorities.html"><strong aria-hidden="true">17.</strong> Repository priorities</a></li><li class="chapter-item expanded "><a href="../en/articles/resolving-merge-conflicts.html"><strong aria-hidden="true">18.</strong> Resolving merge conflicts</a></li><li class="chapter-item expanded "><a href="../en/articles/scripts.html"><strong aria-hidden="true">19.</strong> Scripts</a></li><li class="chapter-item expanded "><a href="../en/articles/troubleshooting.html"><strong aria-hidden="true">20.</strong> Troubleshooting</a></li><li class="chapter-item expanded "><a href="../en/articles/vendor-binaries.html"><strong aria-hidden="true">21.</strong> Vendor binaries and the vendor/bin directory</a></li><li class="chapter-item expanded "><a href="../en/articles/versions.html"><strong aria-hidden="true">22.</strong> Versions and constraints</a></li><li class="chapter-item expanded affix "><li class="part-title">FAQs</li><li class="chapter-item expanded "><a href="../en/faqs/how-do-i-install-a-package-to-a-custom-path-for-my-framework.html"><strong aria-hidden="true">23.</strong> How do I install a package to a custom path for my framework?</a></li><li class="chapter-item expanded "><a href="../en/faqs/how-to-install-composer-programmatically.html"><strong aria-hidden="true">24.</strong> How do I install Composer programmatically?</a></li><li class="chapter-item expanded "><a href="../en/faqs/how-to-install-untrusted-packages-safely.html"><strong aria-hidden="true">25.</strong> How do I install untrusted packages safely? Is it safe to run Composer as superuser or root?</a></li><li class="chapter-item expanded "><a href="../en/faqs/should-i-commit-the-dependencies-in-my-vendor-directory.html"><strong aria-hidden="true">26.</strong> Should I commit the dependencies in my vendor directory?</a></li><li class="chapter-item expanded "><a href="../en/faqs/which-version-numbering-system-does-composer-itself-use.html"><strong aria-hidden="true">27.</strong> Which version numbering system does Composer itself use?</a></li><li class="chapter-item expanded "><a href="../en/faqs/why-are-unbound-version-constraints-a-bad-idea.html"><strong aria-hidden="true">28.</strong> Why are unbound version constraints a bad idea?</a></li><li class="chapter-item expanded "><a href="../en/faqs/why-are-version-constraints-combining-comparisons-and-wildcards-a-bad-idea.html"><strong aria-hidden="true">29.</strong> Why are version constraints combining comparisons and wildcards a bad idea?</a></li><li class="chapter-item expanded "><a href="../en/faqs/why-cant-composer-load-repositories-recursively.html"><strong aria-hidden="true">30.</strong> Why can't Composer load repositories recursively?</a></li><li class="chapter-item expanded affix "><li class="part-title">API Docs</li><li class="chapter-item expanded "><div><strong aria-hidden="true">31.</strong> API Docs</div></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Composer - PT-BR</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="repositories"><a class="header" href="#repositories">Repositories</a></h1>
<p>This chapter will explain the concept of packages and repositories, what kinds
of repositories are available, and how they work.</p>
<h2 id="concepts"><a class="header" href="#concepts">Concepts</a></h2>
<p>Before we look at the different types of repositories that exist, we need to
understand some basic concepts that Composer is built on.</p>
<h3 id="package"><a class="header" href="#package">Package</a></h3>
<p>Composer is a dependency manager. It installs packages locally. A package is
essentially a directory containing something. In this case it is PHP
code, but in theory it could be anything. And it contains a package
description which has a name and a version. The name and the version are used
to identify the package.</p>
<p>In fact, internally Composer sees every version as a separate package. While
this distinction does not matter when you are using Composer, it's quite
important when you want to change it.</p>
<p>In addition to the name and the version, there is useful metadata. The
information most relevant for installation is the source definition, which
describes where to get the package contents. The package data points to the
contents of the package. And there are two options here: dist and source.</p>
<p><strong>Dist:</strong> The dist is a packaged version of the package data. Usually a
released version, usually a stable release.</p>
<p><strong>Source:</strong> The source is used for development. This will usually originate
from a source code repository, such as git. You can fetch this when you want
to modify the downloaded package.</p>
<p>Packages can supply either of these, or even both. Depending on certain
factors, such as user-supplied options and stability of the package, one will
be preferred.</p>
<h3 id="repository"><a class="header" href="#repository">Repository</a></h3>
<p>A repository is a package source. It's a list of packages/versions. Composer
will look in all your repositories to find the packages your project requires.</p>
<p>By default, only the Packagist.org repository is registered in Composer. You can
add more repositories to your project by declaring them in <code>composer.json</code>.</p>
<p>Repositories are only available to the root package and the repositories
defined in your dependencies will not be loaded. Read the
<a href="faqs/why-cant-composer-load-repositories-recursively.html">FAQ entry</a> if you
want to learn why.</p>
<p>When resolving dependencies, packages are looked up from repositories from
top to bottom, and by default, as soon as a package is found in one, Composer
stops looking in other repositories. Read the
<a href="articles/repository-priorities.html">repository priorities</a> article for more
details and to see how to change this behavior.</p>
<h2 id="types"><a class="header" href="#types">Types</a></h2>
<h3 id="composer"><a class="header" href="#composer">Composer</a></h3>
<p>The main repository type is the <code>composer</code> repository. It uses a single
<code>packages.json</code> file that contains all of the package metadata.</p>
<p>This is also the repository type that packagist uses. To reference a
<code>composer</code> repository, supply the path before the <code>packages.json</code> file.
In the case of packagist, that file is located at <code>/packages.json</code>, so the URL of
the repository would be <code>repo.packagist.org</code>. For <code>example.org/packages.json</code> the
repository URL would be <code>example.org</code>.</p>
<pre><code class="language-json">{
    &quot;repositories&quot;: [
        {
            &quot;type&quot;: &quot;composer&quot;,
            &quot;url&quot;: &quot;https://example.org&quot;
        }
    ]
}
</code></pre>
<h4 id="packages"><a class="header" href="#packages">packages</a></h4>
<p>The only required field is <code>packages</code>. The JSON structure is as follows:</p>
<pre><code class="language-json">{
    &quot;packages&quot;: {
        &quot;vendor/package-name&quot;: {
            &quot;dev-master&quot;: { @composer.json },
            &quot;1.0.x-dev&quot;: { @composer.json },
            &quot;0.0.1&quot;: { @composer.json },
            &quot;1.0.0&quot;: { @composer.json }
        }
    }
}
</code></pre>
<p>The <code>@composer.json</code> marker would be the contents of the <code>composer.json</code> from
that package version including as a minimum:</p>
<ul>
<li>name</li>
<li>version</li>
<li>dist or source</li>
</ul>
<p>Here is a minimal package definition:</p>
<pre><code class="language-json">{
    &quot;name&quot;: &quot;smarty/smarty&quot;,
    &quot;version&quot;: &quot;3.1.7&quot;,
    &quot;dist&quot;: {
        &quot;url&quot;: &quot;https://www.smarty.net/files/Smarty-3.1.7.zip&quot;,
        &quot;type&quot;: &quot;zip&quot;
    }
}
</code></pre>
<p>It may include any of the other fields specified in the <a href="04-schema.html">schema</a>.</p>
<h4 id="notify-batch"><a class="header" href="#notify-batch">notify-batch</a></h4>
<p>The <code>notify-batch</code> field allows you to specify a URL that will be called
every time a user installs a package. The URL can be either an absolute path
(that will use the same domain as the repository), or a fully qualified URL.</p>
<p>An example value:</p>
<pre><code class="language-json">{
    &quot;notify-batch&quot;: &quot;/downloads/&quot;
}
</code></pre>
<p>For <code>example.org/packages.json</code> containing a <code>monolog/monolog</code> package, this
would send a <code>POST</code> request to <code>example.org/downloads/</code> with following
JSON request body:</p>
<pre><code class="language-json">{
    &quot;downloads&quot;: [
        {&quot;name&quot;: &quot;monolog/monolog&quot;, &quot;version&quot;: &quot;1.2.1.0&quot;}
    ]
}
</code></pre>
<p>The version field will contain the normalized representation of the version
number.</p>
<p>This field is optional.</p>
<h3 id="metadata-url-available-packages-and-available-package-patterns"><a class="header" href="#metadata-url-available-packages-and-available-package-patterns">metadata-url, available-packages and available-package-patterns</a></h3>
<p>The <code>metadata-url</code> field allows you to provide a URL template to serve all
packages which are in the repository. It must contain the placeholder
<code>%package%</code>.</p>
<p>This field is new in Composer v2, and is prioritised over the
<code>provider-includes</code> and <code>providers-url</code> fields if both are present.
For compatibility with both Composer v1 and v2 you ideally want
to provide both. New repository implementations may only need to
support v2 however.</p>
<p>An example:</p>
<pre><code class="language-json">{
    &quot;metadata-url&quot;: &quot;/p2/%package%.json&quot;
}
</code></pre>
<p>Whenever Composer looks for a package, it will replace <code>%package%</code> by the
package name, and fetch that URL. If dev stability is allowed for the package,
it will also load the URL again with <code>$packageName~dev</code> (e.g.
<code>/p2/foo/bar~dev.json</code> to look for <code>foo/bar</code>'s dev versions).</p>
<p>The <code>foo/bar.json</code> and <code>foo/bar~dev.json</code> files containing package versions
MUST contain only versions for the foo/bar package, as
<code>{&quot;packages&quot;:{&quot;foo/bar&quot;:[ ... versions here ... ]}}</code>.</p>
<p>Caching is done via the use of If-Modified-Since header, so make sure you
return Last-Modified headers and that they are accurate.</p>
<p>The array of versions can also optionally be minified using
<code>Composer\MetadataMinifier\MetadataMinifier::minify()</code> from
<a href="https://packagist.org/packages/composer/metadata-minifier">composer/metadata-minifier</a>.
If you do that, you should add a <code>&quot;minified&quot;: &quot;composer/2.0&quot;</code> key
at the top level to indicate to Composer it must expand the version
list back into the original data. See
https://repo.packagist.org/p2/monolog/monolog.json for an example.</p>
<p>Any requested package which does not exist MUST return a 404 status code,
which will indicate to Composer that this package does not exist in your
repository. Make sure the 404 response is fast to avoid blocking Composer.
Avoid redirects to alternative 404 pages.</p>
<p>If your repository only has a small number of packages, and you want to avoid
the 404-requests, you can also specify an <code>&quot;available-packages&quot;</code> key in
<code>packages.json</code> which should be an array with all the package names that your
repository contains. Alternatively you can specify an
<code>&quot;available-package-patterns&quot;</code> key which is an array of package name patterns
(with <code>*</code> matching any string, e.g. <code>vendor/*</code> would make Composer look up
every matching package name in this repository).</p>
<p>This field is optional.</p>
<h3 id="providers-api"><a class="header" href="#providers-api">providers-api</a></h3>
<p>The <code>providers-api</code> field allows you to provide a URL template to serve all
packages which provide a given package name, but not the package which has
that name. It must contain the placeholder <code>%package%</code>.</p>
<p>For example https://packagist.org/providers/monolog/monolog.json lists some
package which have a &quot;provide&quot; rule for monolog/monolog, but it does not list
monolog/monolog itself.</p>
<pre><code class="language-json">{
    &quot;providers-api&quot;: &quot;https://packagist.org/providers/%package%.json&quot;,
}
</code></pre>
<p>This field is optional.</p>
<h3 id="list"><a class="header" href="#list">list</a></h3>
<p>The <code>list</code> field allows you to return the names of packages which match a
given field (or all names if no filter is present). It should accept an
optional <code>?filter=xx</code> query param, which can contain <code>*</code> as wildcards matching
any substring.</p>
<p>Replace/provide rules should not be considered here.</p>
<p>It must return an array of package names:</p>
<pre><code class="language-json">{
    &quot;packageNames&quot;: [
        &quot;a/b&quot;,
        &quot;c/d&quot;
    ]
}
</code></pre>
<p>See <a href="https://packagist.org/packages/list.json?filter=composer/*">https://packagist.org/packages/list.json?filter=composer/*</a> for example.</p>
<p>This field is optional.</p>
<h4 id="provider-includes-and-providers-url"><a class="header" href="#provider-includes-and-providers-url">provider-includes and providers-url</a></h4>
<p>The <code>provider-includes</code> field allows you to list a set of files that list
package names provided by this repository. The hash should be a sha256 of
the files in this case.</p>
<p>The <code>providers-url</code> describes how provider files are found on the server. It
is an absolute path from the repository root. It must contain the placeholders
<code>%package%</code> and <code>%hash%</code>.</p>
<p>These fields are used by Composer v1, or if your repository does not have the
<code>metadata-url</code> field set.</p>
<p>An example:</p>
<pre><code class="language-json">{
    &quot;provider-includes&quot;: {
        &quot;providers-a.json&quot;: {
            &quot;sha256&quot;: &quot;f5b4bc0b354108ef08614e569c1ed01a2782e67641744864a74e788982886f4c&quot;
        },
        &quot;providers-b.json&quot;: {
            &quot;sha256&quot;: &quot;b38372163fac0573053536f5b8ef11b86f804ea8b016d239e706191203f6efac&quot;
        }
    },
    &quot;providers-url&quot;: &quot;/p/%package%$%hash%.json&quot;
}
</code></pre>
<p>Those files contain lists of package names and hashes to verify the file
integrity, for example:</p>
<pre><code class="language-json">{
    &quot;providers&quot;: {
        &quot;acme/foo&quot;: {
            &quot;sha256&quot;: &quot;38968de1305c2e17f4de33aea164515bc787c42c7e2d6e25948539a14268bb82&quot;
        },
        &quot;acme/bar&quot;: {
            &quot;sha256&quot;: &quot;4dd24c930bd6e1103251306d6336ac813b563a220d9ca14f4743c032fb047233&quot;
        }
    }
}
</code></pre>
<p>The file above declares that acme/foo and acme/bar can be found in this
repository, by loading the file referenced by <code>providers-url</code>, replacing
<code>%package%</code> by the vendor namespaced package name and <code>%hash%</code> by the
sha256 field. Those files themselves contain package definitions as
described <a href="#packages">above</a>.</p>
<p>These fields are optional. You probably don't need them for your own custom
repository.</p>
<h4 id="curl-or-stream-options"><a class="header" href="#curl-or-stream-options">cURL or stream options</a></h4>
<p>The repository is accessed either using cURL (Composer 2 with ext-curl enabled)
or PHP streams. You can set extra options using the <code>options</code> parameter. For
PHP streams, you can set any valid PHP stream context option. See <a href="https://php.net/manual/en/context.php">Context
options and parameters</a> for more
information. When cURL is used, only a limited set of <code>http</code> and <code>ssl</code> options
can be configured.</p>
<pre><code class="language-json">{
    &quot;repositories&quot;: [
        {
            &quot;type&quot;: &quot;composer&quot;,
            &quot;url&quot;: &quot;https://example.org&quot;,
            &quot;options&quot;: {
                &quot;http&quot;: {
                    &quot;timeout&quot;: 60
                }
            }
        }
    ],
    &quot;require&quot;: {
        &quot;acme/package&quot;: &quot;^1.0&quot;
    }
}
</code></pre>
<h3 id="vcs"><a class="header" href="#vcs">VCS</a></h3>
<p>VCS stands for version control system. This includes versioning systems like
git, svn, fossil or hg. Composer has a repository type for installing packages
from these systems.</p>
<h4 id="loading-a-package-from-a-vcs-repository"><a class="header" href="#loading-a-package-from-a-vcs-repository">Loading a package from a VCS repository</a></h4>
<p>There are a few use cases for this. The most common one is maintaining your
own fork of a third party library. If you are using a certain library for your
project, and you decide to change something in the library, you will want your
project to use the patched version. If the library is on GitHub (this is the
case most of the time), you can fork it there and push your changes to
your fork. After that you update the project's <code>composer.json</code>. All you have
to do is add your fork as a repository and update the version constraint to
point to your custom branch. In <code>composer.json</code> only, you should prefix your
custom branch name with <code>&quot;dev-&quot;</code> (without making it part of the actual branch
name). For version constraint naming conventions see
<a href="02-libraries.html">Libraries</a> for more information.</p>
<p>Example assuming you patched monolog to fix a bug in the <code>bugfix</code> branch:</p>
<pre><code class="language-json">{
    &quot;repositories&quot;: [
        {
            &quot;type&quot;: &quot;vcs&quot;,
            &quot;url&quot;: &quot;https://github.com/igorw/monolog&quot;
        }
    ],
    &quot;require&quot;: {
        &quot;monolog/monolog&quot;: &quot;dev-bugfix&quot;
    }
}
</code></pre>
<p>When you run <code>php composer.phar update</code>, you should get your modified version
of <code>monolog/monolog</code> instead of the one from packagist.</p>
<p>Note that you should not rename the package unless you really intend to fork
it in the long term, and completely move away from the original package.
Composer will correctly pick your package over the original one since the
custom repository has priority over packagist. If you want to rename the
package, you should do so in the default (often master) branch and not in a
feature branch, since the package name is taken from the default branch.</p>
<p>Also note that the override will not work if you change the <code>name</code> property
in your forked repository's <code>composer.json</code> file as this needs to match the
original for the override to work.</p>
<p>If other dependencies rely on the package you forked, it is possible to
inline-alias it so that it matches a constraint that it otherwise would not.
For more information <a href="articles/aliases.html">see the aliases article</a>.</p>
<h4 id="using-private-repositories"><a class="header" href="#using-private-repositories">Using private repositories</a></h4>
<p>Exactly the same solution allows you to work with your private repositories at
GitHub and Bitbucket:</p>
<pre><code class="language-json">{
    &quot;require&quot;: {
        &quot;vendor/my-private-repo&quot;: &quot;dev-master&quot;
    },
    &quot;repositories&quot;: [
        {
            &quot;type&quot;: &quot;vcs&quot;,
            &quot;url&quot;:  &quot;git@bitbucket.org:vendor/my-private-repo.git&quot;
        }
    ]
}
</code></pre>
<p>The only requirement is the installation of SSH keys for a git client.</p>
<h4 id="git-alternatives"><a class="header" href="#git-alternatives">Git alternatives</a></h4>
<p>Git is not the only version control system supported by the VCS repository.
The following are supported:</p>
<ul>
<li><strong>Git:</strong> <a href="https://git-scm.com">git-scm.com</a></li>
<li><strong>Subversion:</strong> <a href="https://subversion.apache.org">subversion.apache.org</a></li>
<li><strong>Mercurial:</strong> <a href="https://www.mercurial-scm.org">mercurial-scm.org</a></li>
<li><strong>Fossil</strong>: <a href="https://www.fossil-scm.org/">fossil-scm.org</a></li>
</ul>
<p>To get packages from these systems you need to have their respective clients
installed. That can be inconvenient. And for this reason there is special
support for GitHub and Bitbucket that use the APIs provided by these sites, to
fetch the packages without having to install the version control system. The
VCS repository provides <code>dist</code>s for them that fetch the packages as zips.</p>
<ul>
<li><strong>GitHub:</strong> <a href="https://github.com">github.com</a> (Git)</li>
<li><strong>Bitbucket:</strong> <a href="https://bitbucket.org">bitbucket.org</a> (Git)</li>
</ul>
<p>The VCS driver to be used is detected automatically based on the URL. However,
should you need to specify one for whatever reason, you can use <code>bitbucket</code>,
<code>github</code>, <code>gitlab</code>, <code>perforce</code>, <code>fossil</code>, <code>git</code>, <code>svn</code> or <code>hg</code>
as the repository type instead of <code>vcs</code>.</p>
<p>If you set the <code>no-api</code> key to <code>true</code> on a github repository it will clone the
repository as it would with any other git repository instead of using the
GitHub API. But unlike using the <code>git</code> driver directly, Composer will still
attempt to use github's zip files.</p>
<p>Please note:</p>
<ul>
<li><strong>To let Composer choose which driver to use</strong> the repository type needs to be defined as &quot;vcs&quot;</li>
<li><strong>If you already used a private repository</strong>, this means Composer should have cloned it in cache. If you want to install the same package with drivers, remember to launch the command <code>composer clearcache</code> followed by the command <code>composer update</code> to update Composer cache and install the package from dist.</li>
<li>VCS driver <code>git-bitbucket</code> is deprecated in favor of <code>bitbucket</code></li>
</ul>
<h4 id="bitbucket-driver-configuration"><a class="header" href="#bitbucket-driver-configuration">Bitbucket Driver Configuration</a></h4>
<blockquote>
<p><strong>Note that the repository endpoint for Bitbucket needs to be https rather than git.</strong></p>
</blockquote>
<p>After setting up your bitbucket repository, you will also need to
<a href="articles/authentication-for-private-packages.html#bitbucket-oauth">set up authentication</a>.</p>
<h4 id="subversion-options"><a class="header" href="#subversion-options">Subversion Options</a></h4>
<p>Since Subversion has no native concept of branches and tags, Composer assumes
by default that code is located in <code>$url/trunk</code>, <code>$url/branches</code> and
<code>$url/tags</code>. If your repository has a different layout you can change those
values. For example if you used capitalized names you could configure the
repository like this:</p>
<pre><code class="language-json">{
    &quot;repositories&quot;: [
        {
            &quot;type&quot;: &quot;vcs&quot;,
            &quot;url&quot;: &quot;http://svn.example.org/projectA/&quot;,
            &quot;trunk-path&quot;: &quot;Trunk&quot;,
            &quot;branches-path&quot;: &quot;Branches&quot;,
            &quot;tags-path&quot;: &quot;Tags&quot;
        }
    ]
}
</code></pre>
<p>If you have no branches or tags directory you can disable them entirely by
setting the <code>branches-path</code> or <code>tags-path</code> to <code>false</code>.</p>
<p>If the package is in a subdirectory, e.g. <code>/trunk/foo/bar/composer.json</code> and
<code>/tags/1.0/foo/bar/composer.json</code>, then you can make Composer access it by
setting the <code>&quot;package-path&quot;</code> option to the sub-directory, in this example it
would be <code>&quot;package-path&quot;: &quot;foo/bar/&quot;</code>.</p>
<p>If you have a private Subversion repository you can save credentials in the
http-basic section of your config (See <a href="04-schema.html">Schema</a>):</p>
<pre><code class="language-json">{
    &quot;http-basic&quot;: {
        &quot;svn.example.org&quot;: {
            &quot;username&quot;: &quot;username&quot;,
            &quot;password&quot;: &quot;password&quot;
        }
    }
}
</code></pre>
<p>If your Subversion client is configured to store credentials by default these
credentials will be saved for the current user and existing saved credentials
for this server will be overwritten. To change this behavior by setting the
<code>&quot;svn-cache-credentials&quot;</code> option in your repository configuration:</p>
<pre><code class="language-json">{
    &quot;repositories&quot;: [
        {
            &quot;type&quot;: &quot;vcs&quot;,
            &quot;url&quot;: &quot;http://svn.example.org/projectA/&quot;,
            &quot;svn-cache-credentials&quot;: false
        }
    ]
}
</code></pre>
<h3 id="package-1"><a class="header" href="#package-1">Package</a></h3>
<p>If you want to use a project that does not support Composer through any of the
means above, you still can define the package yourself by using a <code>package</code>
repository.</p>
<p>Basically, you define the same information that is included in the <code>composer</code>
repository's <code>packages.json</code>, but only for a single package. Again, the
minimum required fields are <code>name</code>, <code>version</code>, and either of <code>dist</code> or
<code>source</code>.</p>
<p>Here is an example for the smarty template engine:</p>
<pre><code class="language-json">{
    &quot;repositories&quot;: [
        {
            &quot;type&quot;: &quot;package&quot;,
            &quot;package&quot;: {
                &quot;name&quot;: &quot;smarty/smarty&quot;,
                &quot;version&quot;: &quot;3.1.7&quot;,
                &quot;dist&quot;: {
                    &quot;url&quot;: &quot;https://www.smarty.net/files/Smarty-3.1.7.zip&quot;,
                    &quot;type&quot;: &quot;zip&quot;
                },
                &quot;source&quot;: {
                    &quot;url&quot;: &quot;http://smarty-php.googlecode.com/svn/&quot;,
                    &quot;type&quot;: &quot;svn&quot;,
                    &quot;reference&quot;: &quot;tags/Smarty_3_1_7/distribution/&quot;
                },
                &quot;autoload&quot;: {
                    &quot;classmap&quot;: [&quot;libs/&quot;]
                }
            }
        }
    ],
    &quot;require&quot;: {
        &quot;smarty/smarty&quot;: &quot;3.1.*&quot;
    }
}
</code></pre>
<p>Typically, you would leave the source part off, as you don't really need it.</p>
<blockquote>
<p><strong>Note</strong>: This repository type has a few limitations and should be avoided
whenever possible:</p>
<ul>
<li>Composer will not update the package unless you change the <code>version</code> field.</li>
<li>Composer will not update the commit references, so if you use <code>master</code> as
reference you will have to delete the package to force an update, and will
have to deal with an unstable lock file.</li>
</ul>
</blockquote>
<p>The <code>&quot;package&quot;</code> key in a <code>package</code> repository may be set to an array to define multiple versions of a package:</p>
<pre><code class="language-json">{
    &quot;repositories&quot;: [
        {
            &quot;type&quot;: &quot;package&quot;,
            &quot;package&quot;: [
                {
                    &quot;name&quot;: &quot;foo/bar&quot;,
                    &quot;version&quot;: &quot;1.0.0&quot;,
                    ...
                },
                {
                    &quot;name&quot;: &quot;foo/bar&quot;,
                    &quot;version&quot;: &quot;2.0.0&quot;,
                    ...
                }
            ]
        }
    ]
}
</code></pre>
<h2 id="hosting-your-own"><a class="header" href="#hosting-your-own">Hosting your own</a></h2>
<p>While you will probably want to put your packages on packagist most of the
time, there are some use cases for hosting your own repository.</p>
<ul>
<li>
<p><strong>Private company packages:</strong> If you are part of a company that uses Composer
for their packages internally, you might want to keep those packages private.</p>
</li>
<li>
<p><strong>Separate ecosystem:</strong> If you have a project which has its own ecosystem,
and the packages aren't really reusable by the greater PHP community, you
might want to keep them separate to packagist. An example of this would be
wordpress plugins.</p>
</li>
</ul>
<p>For hosting your own packages, a native <code>composer</code> type of repository is
recommended, which provides the best performance.</p>
<p>There are a few tools that can help you create a <code>composer</code> repository.</p>
<h3 id="private-packagist"><a class="header" href="#private-packagist">Private Packagist</a></h3>
<p><a href="https://packagist.com/">Private Packagist</a> is a hosted or self-hosted
application providing private package hosting as well as mirroring of
GitHub, Packagist.org and other package repositories.</p>
<p>Check out <a href="https://packagist.com/">Packagist.com</a> for more information.</p>
<h3 id="satis"><a class="header" href="#satis">Satis</a></h3>
<p>Satis is a static <code>composer</code> repository generator. It is a bit like an ultra-
lightweight, static file-based version of packagist.</p>
<p>You give it a <code>composer.json</code> containing repositories, typically VCS and
package repository definitions. It will fetch all the packages that are
<code>require</code>d and dump a <code>packages.json</code> that is your <code>composer</code> repository.</p>
<p>Check <a href="https://github.com/composer/satis">the satis GitHub repository</a> and
the <a href="articles/handling-private-packages.html">handling private packages article</a> for more
information.</p>
<h3 id="artifact"><a class="header" href="#artifact">Artifact</a></h3>
<p>There are some cases, when there is no ability to have one of the previously
mentioned repository types online, even the VCS one. A typical example could be
cross-organisation library exchange through build artifacts. Of course, most
of the time these are private. To use these archives as-is, one can use a
repository of type <code>artifact</code> with a folder containing ZIP or TAR archives of
those private packages:</p>
<pre><code class="language-json">{
    &quot;repositories&quot;: [
        {
            &quot;type&quot;: &quot;artifact&quot;,
            &quot;url&quot;: &quot;path/to/directory/with/zips/&quot;
        }
    ],
    &quot;require&quot;: {
        &quot;private-vendor-one/core&quot;: &quot;15.6.2&quot;,
        &quot;private-vendor-two/connectivity&quot;: &quot;*&quot;,
        &quot;acme-corp/parser&quot;: &quot;10.3.5&quot;
    }
}
</code></pre>
<p>Each zip artifact is a ZIP archive with <code>composer.json</code> in root folder:</p>
<pre><code class="language-sh">unzip -l acme-corp-parser-10.3.5.zip

composer.json
...
</code></pre>
<p>If there are two archives with different versions of a package, they are both
imported. When an archive with a newer version is added in the artifact folder
and you run <code>update</code>, that version will be imported as well and Composer will
update to the latest version.</p>
<h3 id="path"><a class="header" href="#path">Path</a></h3>
<p>In addition to the artifact repository, you can use the path one, which allows
you to depend on a local directory, either absolute or relative. This can be
especially useful when dealing with monolithic repositories.</p>
<p>For instance, if you have the following directory structure in your repository:</p>
<pre><code>...
├── apps
│   └── my-app
│       └── composer.json
├── packages
│   └── my-package
│       └── composer.json
...
</code></pre>
<p>Then, to add the package <code>my/package</code> as a dependency, in your
<code>apps/my-app/composer.json</code> file, you can use the following configuration:</p>
<pre><code class="language-json">{
    &quot;repositories&quot;: [
        {
            &quot;type&quot;: &quot;path&quot;,
            &quot;url&quot;: &quot;../../packages/my-package&quot;
        }
    ],
    &quot;require&quot;: {
        &quot;my/package&quot;: &quot;*&quot;
    }
}
</code></pre>
<p>If the package is a local VCS repository, the version may be inferred by
the branch or tag that is currently checked out. Otherwise, the version should
be explicitly defined in the package's <code>composer.json</code> file. If the version
cannot be resolved by these means, it is assumed to be <code>dev-master</code>.</p>
<p>When the version cannot be inferred from the local VCS repository, or when you
want to override the version, you can use the <code>versions</code> option when declaring
the repository:</p>
<pre><code class="language-json">{
    &quot;repositories&quot;: [
        {
            &quot;type&quot;: &quot;path&quot;,
            &quot;url&quot;: &quot;../../packages/my-package&quot;,
            &quot;options&quot;: {
                &quot;versions&quot;: {
                    &quot;my/package&quot;: &quot;4.2-dev&quot;
                }
            }
        }
    ]
}
</code></pre>
<p>The local package will be symlinked if possible, in which case the output in
the console will read <code>Symlinking from ../../packages/my-package</code>. If symlinking
is <em>not</em> possible the package will be copied. In that case, the console will
output <code>Mirrored from ../../packages/my-package</code>.</p>
<p>Instead of default fallback strategy you can force to use symlink with
<code>&quot;symlink&quot;: true</code> or mirroring with <code>&quot;symlink&quot;: false</code> option. Forcing
mirroring can be useful when deploying or generating package from a
monolithic repository.</p>
<blockquote>
<p><strong>Note:</strong> On Windows, directory symlinks are implemented using NTFS junctions
because they can be created by non-admin users. Mirroring will always be used
on versions below Windows 7 or if <code>proc_open</code> has been disabled.</p>
</blockquote>
<pre><code class="language-json">{
    &quot;repositories&quot;: [
        {
            &quot;type&quot;: &quot;path&quot;,
            &quot;url&quot;: &quot;../../packages/my-package&quot;,
            &quot;options&quot;: {
                &quot;symlink&quot;: false
            }
        }
    ]
}
</code></pre>
<p>Leading tildes are expanded to the current user's home folder, and environment
variables are parsed in both Windows and Linux/Mac notations. For example
<code>~/git/mypackage</code> will automatically load the mypackage clone from
<code>/home/&lt;username&gt;/git/mypackage</code>, equivalent to <code>$HOME/git/mypackage</code> or
<code>%USERPROFILE%/git/mypackage</code>.</p>
<blockquote>
<p><strong>Note:</strong> Repository paths can also contain wildcards like <code>*</code> and <code>?</code>.
For details, see the <a href="https://php.net/glob">PHP glob function</a>.</p>
</blockquote>
<p>You can configure the way the package's dist reference (which appears in
the composer.lock file) is built.</p>
<p>The following modes exist:</p>
<ul>
<li><code>none</code> - reference will be always null. This can help reduce lock file conflicts
in the lock file but reduces clarity as to when the last update happened and whether
the package is in the latest state.</li>
<li><code>config</code> - reference is built based on a hash of the package's composer.json and repo config</li>
<li><code>auto</code> (used by default) - reference is built basing on the hash like with <code>config</code>, but if
the package folder contains a git repository, the HEAD commit's hash is used as reference instead.</li>
</ul>
<pre><code class="language-json">{
    &quot;repositories&quot;: [
        {
            &quot;type&quot;: &quot;path&quot;,
            &quot;url&quot;: &quot;../../packages/my-package&quot;,
            &quot;options&quot;: {
                &quot;reference&quot;: &quot;config&quot;
            }
        }
    ]
}
</code></pre>
<h2 id="disabling-packagistorg"><a class="header" href="#disabling-packagistorg">Disabling Packagist.org</a></h2>
<p>You can disable the default Packagist.org repository by adding this to your
<code>composer.json</code>:</p>
<pre><code class="language-json">{
    &quot;repositories&quot;: [
        {
            &quot;packagist.org&quot;: false
        }
    ]
}
</code></pre>
<p>You can disable Packagist.org globally by using the global config flag:</p>
<pre><code class="language-bash">php composer.phar config -g repo.packagist false
</code></pre>
<p>← <a href="04-schema.html">Schema</a>  |  <a href="06-config.html">Config</a> →</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../en/04-schema.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../en/06-config.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../en/04-schema.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../en/06-config.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->


    </body>
</html>

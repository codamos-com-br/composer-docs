<!DOCTYPE HTML>
<html lang="pt-br" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Scripts - Composer - PT-BR</title>


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><li class="part-title">Book</li><li class="chapter-item expanded "><a href="../../en/00-intro.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="../../en/01-basic-usage.html"><strong aria-hidden="true">2.</strong> Basic usage</a></li><li class="chapter-item expanded "><a href="../../en/02-libraries.html"><strong aria-hidden="true">3.</strong> Libraries</a></li><li class="chapter-item expanded "><a href="../../en/03-cli.html"><strong aria-hidden="true">4.</strong> CLI</a></li><li class="chapter-item expanded "><a href="../../en/04-schema.html"><strong aria-hidden="true">5.</strong> Schema</a></li><li class="chapter-item expanded "><a href="../../en/05-repositories.html"><strong aria-hidden="true">6.</strong> Repositories</a></li><li class="chapter-item expanded "><a href="../../en/06-config.html"><strong aria-hidden="true">7.</strong> Config</a></li><li class="chapter-item expanded "><a href="../../en/07-runtime.html"><strong aria-hidden="true">8.</strong> Runtime</a></li><li class="chapter-item expanded "><a href="../../en/08-community.html"><strong aria-hidden="true">9.</strong> Community</a></li><li class="chapter-item expanded affix "><li class="part-title">Articles</li><li class="chapter-item expanded "><a href="../../en/articles/aliases.html"><strong aria-hidden="true">10.</strong> Aliases</a></li><li class="chapter-item expanded "><a href="../../en/articles/authentication-for-private-packages.html"><strong aria-hidden="true">11.</strong> Authentication for privately hosted packages and repositories</a></li><li class="chapter-item expanded "><a href="../../en/articles/autoloader-optimization.html"><strong aria-hidden="true">12.</strong> Autoloader optimization</a></li><li class="chapter-item expanded "><a href="../../en/articles/composer-platform-dependencies.html"><strong aria-hidden="true">13.</strong> Composer platform dependencies</a></li><li class="chapter-item expanded "><a href="../../en/articles/custom-installers.html"><strong aria-hidden="true">14.</strong> Setting up and using custom installers</a></li><li class="chapter-item expanded "><a href="../../en/articles/handling-private-packages.html"><strong aria-hidden="true">15.</strong> Handling private packages</a></li><li class="chapter-item expanded "><a href="../../en/articles/plugins.html"><strong aria-hidden="true">16.</strong> Setting up and using plugins</a></li><li class="chapter-item expanded "><a href="../../en/articles/repository-priorities.html"><strong aria-hidden="true">17.</strong> Repository priorities</a></li><li class="chapter-item expanded "><a href="../../en/articles/resolving-merge-conflicts.html"><strong aria-hidden="true">18.</strong> Resolving merge conflicts</a></li><li class="chapter-item expanded "><a href="../../en/articles/scripts.html" class="active"><strong aria-hidden="true">19.</strong> Scripts</a></li><li class="chapter-item expanded "><a href="../../en/articles/troubleshooting.html"><strong aria-hidden="true">20.</strong> Troubleshooting</a></li><li class="chapter-item expanded "><a href="../../en/articles/vendor-binaries.html"><strong aria-hidden="true">21.</strong> Vendor binaries and the vendor/bin directory</a></li><li class="chapter-item expanded "><a href="../../en/articles/versions.html"><strong aria-hidden="true">22.</strong> Versions and constraints</a></li><li class="chapter-item expanded affix "><li class="part-title">FAQs</li><li class="chapter-item expanded "><a href="../../en/faqs/how-do-i-install-a-package-to-a-custom-path-for-my-framework.html"><strong aria-hidden="true">23.</strong> How do I install a package to a custom path for my framework?</a></li><li class="chapter-item expanded "><a href="../../en/faqs/how-to-install-composer-programmatically.html"><strong aria-hidden="true">24.</strong> How do I install Composer programmatically?</a></li><li class="chapter-item expanded "><a href="../../en/faqs/how-to-install-untrusted-packages-safely.html"><strong aria-hidden="true">25.</strong> How do I install untrusted packages safely? Is it safe to run Composer as superuser or root?</a></li><li class="chapter-item expanded "><a href="../../en/faqs/should-i-commit-the-dependencies-in-my-vendor-directory.html"><strong aria-hidden="true">26.</strong> Should I commit the dependencies in my vendor directory?</a></li><li class="chapter-item expanded "><a href="../../en/faqs/which-version-numbering-system-does-composer-itself-use.html"><strong aria-hidden="true">27.</strong> Which version numbering system does Composer itself use?</a></li><li class="chapter-item expanded "><a href="../../en/faqs/why-are-unbound-version-constraints-a-bad-idea.html"><strong aria-hidden="true">28.</strong> Why are unbound version constraints a bad idea?</a></li><li class="chapter-item expanded "><a href="../../en/faqs/why-are-version-constraints-combining-comparisons-and-wildcards-a-bad-idea.html"><strong aria-hidden="true">29.</strong> Why are version constraints combining comparisons and wildcards a bad idea?</a></li><li class="chapter-item expanded "><a href="../../en/faqs/why-cant-composer-load-repositories-recursively.html"><strong aria-hidden="true">30.</strong> Why can't Composer load repositories recursively?</a></li><li class="chapter-item expanded affix "><li class="part-title">API Docs</li><li class="chapter-item expanded "><div><strong aria-hidden="true">31.</strong> API Docs</div></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Composer - PT-BR</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <!--
    tagline: Script are callbacks that are called before/after installing packages
-->
<h1 id="scripts"><a class="header" href="#scripts">Scripts</a></h1>
<h2 id="what-is-a-script"><a class="header" href="#what-is-a-script">What is a script?</a></h2>
<p>A script, in Composer's terms, can either be a PHP callback (defined as a
static method) or any command-line executable command. Scripts are useful
for executing a package's custom code or package-specific commands during
the Composer execution process.</p>
<blockquote>
<p><strong>Note:</strong> Only scripts defined in the root package's <code>composer.json</code> are
executed. If a dependency of the root package specifies its own scripts,
Composer does not execute those additional scripts.</p>
</blockquote>
<h2 id="event-names"><a class="header" href="#event-names">Event names</a></h2>
<p>Composer fires the following named events during its execution process:</p>
<h3 id="command-events"><a class="header" href="#command-events">Command Events</a></h3>
<ul>
<li><strong>pre-install-cmd</strong>: occurs before the <code>install</code> command is executed with a
lock file present.</li>
<li><strong>post-install-cmd</strong>: occurs after the <code>install</code> command has been executed
with a lock file present.</li>
<li><strong>pre-update-cmd</strong>: occurs before the <code>update</code> command is executed, or before
the <code>install</code> command is executed without a lock file present.</li>
<li><strong>post-update-cmd</strong>: occurs after the <code>update</code> command has been executed, or
after the <code>install</code> command has been executed without a lock file present.</li>
<li><strong>pre-status-cmd</strong>: occurs before the <code>status</code> command is executed.</li>
<li><strong>post-status-cmd</strong>: occurs after the <code>status</code> command has been executed.</li>
<li><strong>pre-archive-cmd</strong>: occurs before the <code>archive</code> command is executed.</li>
<li><strong>post-archive-cmd</strong>: occurs after the <code>archive</code> command has been executed.</li>
<li><strong>pre-autoload-dump</strong>: occurs before the autoloader is dumped, either during
<code>install</code>/<code>update</code>, or via the <code>dump-autoload</code> command.</li>
<li><strong>post-autoload-dump</strong>: occurs after the autoloader has been dumped, either
during <code>install</code>/<code>update</code>, or via the <code>dump-autoload</code> command.</li>
<li><strong>post-root-package-install</strong>: occurs after the root package has been
installed during the <code>create-project</code> command (but before its
dependencies are installed).</li>
<li><strong>post-create-project-cmd</strong>: occurs after the <code>create-project</code> command has
been executed.</li>
</ul>
<h3 id="installer-events"><a class="header" href="#installer-events">Installer Events</a></h3>
<ul>
<li><strong>pre-operations-exec</strong>: occurs before the install/upgrade/.. operations
are executed when installing a lock file. Plugins that need to hook into
this event will need to be installed globally to be usable, as otherwise
they would not be loaded yet when a fresh install of a project happens.</li>
</ul>
<h3 id="package-events"><a class="header" href="#package-events">Package Events</a></h3>
<ul>
<li><strong>pre-package-install</strong>: occurs before a package is installed.</li>
<li><strong>post-package-install</strong>: occurs after a package has been installed.</li>
<li><strong>pre-package-update</strong>: occurs before a package is updated.</li>
<li><strong>post-package-update</strong>: occurs after a package has been updated.</li>
<li><strong>pre-package-uninstall</strong>: occurs before a package is uninstalled.</li>
<li><strong>post-package-uninstall</strong>: occurs after a package has been uninstalled.</li>
</ul>
<h3 id="plugin-events"><a class="header" href="#plugin-events">Plugin Events</a></h3>
<ul>
<li><strong>init</strong>: occurs after a Composer instance is done being initialized.</li>
<li><strong>command</strong>: occurs before any Composer Command is executed on the CLI. It
provides you with access to the input and output objects of the program.</li>
<li><strong>pre-file-download</strong>: occurs before files are downloaded and allows
you to manipulate the <code>HttpDownloader</code> object prior to downloading files
based on the URL to be downloaded.</li>
<li><strong>post-file-download</strong>: occurs after package dist files are downloaded and
allows you to perform additional checks on the file if required.</li>
<li><strong>pre-command-run</strong>: occurs before a command is executed and allows you to
manipulate the <code>InputInterface</code> object's options and arguments to tweak
a command's behavior.</li>
<li><strong>pre-pool-create</strong>: occurs before the Pool of packages is created, and lets
you filter the list of packages that is going to enter the Solver.</li>
</ul>
<blockquote>
<p><strong>Note:</strong> Composer makes no assumptions about the state of your dependencies
prior to <code>install</code> or <code>update</code>. Therefore, you should not specify scripts
that require Composer-managed dependencies in the <code>pre-update-cmd</code> or
<code>pre-install-cmd</code> event hooks. If you need to execute scripts prior to
<code>install</code> or <code>update</code> please make sure they are self-contained within your
root package.</p>
</blockquote>
<h2 id="defining-scripts"><a class="header" href="#defining-scripts">Defining scripts</a></h2>
<p>The root JSON object in <code>composer.json</code> should have a property called
<code>&quot;scripts&quot;</code>, which contains pairs of named events and each event's
corresponding scripts. An event's scripts can be defined as either a string
(only for a single script) or an array (for single or multiple scripts.)</p>
<p>For any given event:</p>
<ul>
<li>Scripts execute in the order defined when their corresponding event is fired.</li>
<li>An array of scripts wired to a single event can contain both PHP callbacks
and command-line executable commands.</li>
<li>PHP classes containing defined callbacks must be autoloadable via Composer's
autoload functionality.</li>
<li>Callbacks can only autoload classes from psr-0, psr-4 and classmap
definitions. If a defined callback relies on functions defined outside of a
class, the callback itself is responsible for loading the file containing these
functions.</li>
</ul>
<p>Script definition example:</p>
<pre><code class="language-json">{
    &quot;scripts&quot;: {
        &quot;post-update-cmd&quot;: &quot;MyVendor\\MyClass::postUpdate&quot;,
        &quot;post-package-install&quot;: [
            &quot;MyVendor\\MyClass::postPackageInstall&quot;
        ],
        &quot;post-install-cmd&quot;: [
            &quot;MyVendor\\MyClass::warmCache&quot;,
            &quot;phpunit -c app/&quot;
        ],
        &quot;post-autoload-dump&quot;: [
            &quot;MyVendor\\MyClass::postAutoloadDump&quot;
        ],
        &quot;post-create-project-cmd&quot;: [
            &quot;php -r \&quot;copy('config/local-example.php', 'config/local.php');\&quot;&quot;
        ]
    }
}
</code></pre>
<p>Using the previous definition example, here's the class <code>MyVendor\MyClass</code>
that might be used to execute the PHP callbacks:</p>
<pre><code class="language-php">&lt;?php

namespace MyVendor;

use Composer\Script\Event;
use Composer\Installer\PackageEvent;

class MyClass
{
    public static function postUpdate(Event $event)
    {
        $composer = $event-&gt;getComposer();
        // do stuff
    }

    public static function postAutoloadDump(Event $event)
    {
        $vendorDir = $event-&gt;getComposer()-&gt;getConfig()-&gt;get('vendor-dir');
        require $vendorDir . '/autoload.php';

        some_function_from_an_autoloaded_file();
    }

    public static function postPackageInstall(PackageEvent $event)
    {
        $installedPackage = $event-&gt;getOperation()-&gt;getPackage();
        // do stuff
    }

    public static function warmCache(Event $event)
    {
        // make cache toasty
    }
}
</code></pre>
<p><strong>Note:</strong> During a Composer <code>install</code> or <code>update</code> command run, a variable named
<code>COMPOSER_DEV_MODE</code> will be added to the environment. If the command was run
with the <code>--no-dev</code> flag, this variable will be set to 0, otherwise it will be
set to 1. The variable is also available while <code>dump-autoload</code> runs, and it
will be set to the same as the last <code>install</code> or <code>update</code> was run in.</p>
<h2 id="event-classes"><a class="header" href="#event-classes">Event classes</a></h2>
<p>When an event is fired, your PHP callback receives as first argument a
<code>Composer\EventDispatcher\Event</code> object. This object has a <code>getName()</code> method
that lets you retrieve the event name.</p>
<p>Depending on the <a href="#event-names">script types</a> you will get various event
subclasses containing various getters with relevant data and associated
objects:</p>
<ul>
<li>Base class: <a href="https://github.com/composer/composer/blob/main/src/Composer/EventDispatcher/Event.php"><code>Composer\EventDispatcher\Event</code></a></li>
<li>Command Events: <a href="https://github.com/composer/composer/blob/main/src/Composer/Script/Event.php"><code>Composer\Script\Event</code></a></li>
<li>Installer Events: <a href="https://github.com/composer/composer/blob/main/src/Composer/Installer/InstallerEvent.php"><code>Composer\Installer\InstallerEvent</code></a></li>
<li>Package Events: <a href="https://github.com/composer/composer/blob/main/src/Composer/Installer/PackageEvent.php"><code>Composer\Installer\PackageEvent</code></a></li>
<li>Plugin Events:
<ul>
<li>init: <a href="https://github.com/composer/composer/blob/main/src/Composer/EventDispatcher/Event.php"><code>Composer\EventDispatcher\Event</code></a></li>
<li>command: <a href="https://github.com/composer/composer/blob/main/src/Composer/Plugin/CommandEvent.php"><code>Composer\Plugin\CommandEvent</code></a></li>
<li>pre-file-download: <a href="https://github.com/composer/composer/blob/main/src/Composer/Plugin/PreFileDownloadEvent.php"><code>Composer\Plugin\PreFileDownloadEvent</code></a></li>
<li>post-file-download: <a href="https://github.com/composer/composer/blob/main/src/Composer/Plugin/PostFileDownloadEvent.php"><code>Composer\Plugin\PostFileDownloadEvent</code></a></li>
</ul>
</li>
</ul>
<h2 id="running-scripts-manually"><a class="header" href="#running-scripts-manually">Running scripts manually</a></h2>
<p>If you would like to run the scripts for an event manually, the syntax is:</p>
<pre><code class="language-sh">php composer.phar run-script [--dev] [--no-dev] script
</code></pre>
<p>For example <code>composer run-script post-install-cmd</code> will run any
<strong>post-install-cmd</strong> scripts and <a href="plugins.html">plugins</a> that have been defined.</p>
<p>You can also give additional arguments to the script handler by appending <code>--</code>
followed by the handler arguments. e.g.
<code>composer run-script post-install-cmd -- --check</code> will pass<code>--check</code> along to
the script handler. Those arguments are received as CLI arg by CLI handlers,
and can be retrieved as an array via <code>$event-&gt;getArguments()</code> by PHP handlers.</p>
<h2 id="writing-custom-commands"><a class="header" href="#writing-custom-commands">Writing custom commands</a></h2>
<p>If you add custom scripts that do not fit one of the predefined event name
above, you can either run them with run-script or also run them as native
Composer commands. For example the handler defined below is executable by
running <code>composer test</code>:</p>
<pre><code class="language-json">{
    &quot;scripts&quot;: {
        &quot;test&quot;: &quot;phpunit&quot;
    }
}
</code></pre>
<p>Similar to the <code>run-script</code> command you can give additional arguments to scripts,
e.g. <code>composer test -- --filter &lt;pattern&gt;</code> will pass <code>--filter &lt;pattern&gt;</code> along
to the <code>phpunit</code> script.</p>
<blockquote>
<p><strong>Note:</strong> Before executing scripts, Composer's bin-dir is temporarily pushed
on top of the PATH environment variable so that binaries of dependencies
are directly accessible. In this example no matter if the <code>phpunit</code> binary is
actually in <code>vendor/bin/phpunit</code> or <code>bin/phpunit</code> it will be found and executed.</p>
</blockquote>
<p>Although Composer is not intended to manage long-running processes and other
such aspects of PHP projects, it can sometimes be handy to disable the process
timeout on custom commands. This timeout defaults to 300 seconds and can be
overridden in a variety of ways depending on the desired effect:</p>
<ul>
<li>disable it for all commands using the config key <code>process-timeout</code>,</li>
<li>disable it for the current or future invocations of composer using the
environment variable <code>COMPOSER_PROCESS_TIMEOUT</code>,</li>
<li>for a specific invocation using the <code>--timeout</code> flag of the <code>run-script</code> command,</li>
<li>using a static helper for specific scripts.</li>
</ul>
<p>To disable the timeout for specific scripts with the static helper directly in
composer.json:</p>
<pre><code class="language-json">{
    &quot;scripts&quot;: {
        &quot;test&quot;: [
            &quot;Composer\\Config::disableProcessTimeout&quot;,
            &quot;phpunit&quot;
        ]
    }
}
</code></pre>
<p>To disable the timeout for every script on a given project, you can use the
composer.json configuration:</p>
<pre><code class="language-json">{
    &quot;config&quot;: {
        &quot;process-timeout&quot;: 0
    }
}
</code></pre>
<p>It's also possible to set the global environment variable to disable the timeout
of all following scripts in the current terminal environment:</p>
<pre><code>export COMPOSER_PROCESS_TIMEOUT=0
</code></pre>
<p>To disable the timeout of a single script call, you must use the <code>run-script</code> composer
command and specify the <code>--timeout</code> parameter:</p>
<pre><code>php composer.phar run-script --timeout=0 test
</code></pre>
<h2 id="referencing-scripts"><a class="header" href="#referencing-scripts">Referencing scripts</a></h2>
<p>To enable script re-use and avoid duplicates, you can call a script from another
one by prefixing the command name with <code>@</code>:</p>
<pre><code class="language-json">{
    &quot;scripts&quot;: {
        &quot;test&quot;: [
            &quot;@clearCache&quot;,
            &quot;phpunit&quot;
        ],
        &quot;clearCache&quot;: &quot;rm -rf cache/*&quot;
    }
}
</code></pre>
<p>You can also refer a script and pass it new arguments:</p>
<pre><code class="language-json">{
  &quot;scripts&quot;: {
    &quot;tests&quot;: &quot;phpunit&quot;,
    &quot;testsVerbose&quot;: &quot;@tests -vvv&quot;
  }
}
</code></pre>
<h2 id="calling-composer-commands"><a class="header" href="#calling-composer-commands">Calling Composer commands</a></h2>
<p>To call Composer commands, you can use <code>@composer</code> which will automatically
resolve to whatever composer.phar is currently being used:</p>
<pre><code class="language-json">{
    &quot;scripts&quot;: {
        &quot;test&quot;: [
            &quot;@composer install&quot;,
            &quot;phpunit&quot;
        ]
    }
}
</code></pre>
<p>One limitation of this is that you can not call multiple composer commands in
a row like <code>@composer install &amp;&amp; @composer foo</code>. You must split them up in a
JSON array of commands.</p>
<h2 id="executing-php-scripts"><a class="header" href="#executing-php-scripts">Executing PHP scripts</a></h2>
<p>To execute PHP scripts, you can use <code>@php</code> which will automatically
resolve to whatever php process is currently being used:</p>
<pre><code class="language-json">{
    &quot;scripts&quot;: {
        &quot;test&quot;: [
            &quot;@php script.php&quot;,
            &quot;phpunit&quot;
        ]
    }
}
</code></pre>
<p>One limitation of this is that you can not call multiple commands in
a row like <code>@php install &amp;&amp; @php foo</code>. You must split them up in a
JSON array of commands.</p>
<p>You can also call a shell/bash script, which will have the path to
the PHP executable available in it as a <code>PHP_BINARY</code> env var.</p>
<h2 id="setting-environment-variables"><a class="header" href="#setting-environment-variables">Setting environment variables</a></h2>
<p>To set an environment variable in a cross-platform way, you can use <code>@putenv</code>:</p>
<pre><code class="language-json">{
    &quot;scripts&quot;: {
        &quot;install-phpstan&quot;: [
            &quot;@putenv COMPOSER=phpstan-composer.json&quot;,
            &quot;composer install --prefer-dist&quot;
        ]
    }
}
</code></pre>
<h2 id="custom-descriptions"><a class="header" href="#custom-descriptions">Custom descriptions.</a></h2>
<p>You can set custom script descriptions with the following in your <code>composer.json</code>:</p>
<pre><code class="language-json">{
    &quot;scripts-descriptions&quot;: {
        &quot;test&quot;: &quot;Run all tests!&quot;
    }
}
</code></pre>
<p>The descriptions are used in <code>composer list</code> or <code>composer run -l</code> commands to
describe what the scripts do when the command is run.</p>
<blockquote>
<p><strong>Note:</strong> You can only set custom descriptions of custom commands.</p>
</blockquote>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../en/articles/resolving-merge-conflicts.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../../en/articles/troubleshooting.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../en/articles/resolving-merge-conflicts.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../../en/articles/troubleshooting.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="../../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
